<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>viewer 2.0</title>
	<style type="text/css">
		* {margin: 0; padding: 0;}
		:root { --purple: #4E4C67; --rose:#985F6F; --pink:#B4869F;
			    --blue:#A6B1E1; --white:#DCD6F7;}
		html, body, main {width: 100%; height: 100%;}
		main {background: var(--white);}
		article#gamebox {height: 90%; width: 100%; background:var(--rose); 
						 overflow-x: scroll; overflow-y: scroll;}
		footer {height: 10%; width: 100%; background:var(--blue); font-size: 60%;}

		html, body, main, #gamebox, footer {position: relative; z-index: -1;}
		.tile, .character, .object {position: absolute;}
		.tile { z-index: -1;}
		.character img {min-width: 70%; min-height: 70%; max-width: 100%; max-height: 100%;}
		.tile img, .object img {width: 100%; height: 100%;}
		.object {box-shadow: 3px -20px 120px 0px black;}


	</style>
	<script type="text/javascript" src="helpers.js"></script>
	<script type="text/javascript" src="character.js"></script>
	<script type="text/javascript" src="map.js"></script>
</head>
<body>
	<main>
		<article id="gamebox">
			<article id="map">
				
			</article>
		</article>
		<footer></footer>
	</main>
	<script id="characterTest" type="text/javascript">
		window.onload = function() {
			// id, imgFolder, imgName, imgCellWidth, imgCellHeight,
	            // row, col, pose, facing, baseSpeed, mode, map, search
	        let m = {mapHeight: 1200, 
					   mapWidth: 1200, 
					   mapRows: 40, 
					   mapCols: 40,
					   cellSize: 1200 / 40,
					   floorTileImg: "images/map/floor/brownfloor_2_2.png"};

			let ctop = {objWidth: 2, objHeight: 1, barrierList: [], 
					 img: "images/map/material/cabinet_top.png"}
			let cbot = {objWidth: 2, objHeight: 1, barrierList: [[0,0],[0,1]], 
					 img: "images/map/material/cabinet_bottom.png"}

			let cabinetTop = new ImageObject(ctop.objWidth, ctop.objHeight, ctop.barrierList, ctop.img);
			let cabinetBot = new ImageObject(cbot.objWidth, cbot.objHeight, cbot.barrierList, cbot.img);

			let map = new Map(m.mapWidth, m.mapHeight, m.mapRows, m.mapCols, m.floorTileImg)
			// map.setTiles();
			// map.addObject(cabinetTop, 4, 2);
			// map.addObject(cabinetBot, 5, 2);
			makeSeaHorse();


			let loiterRight = {row: 5, col: 6, axis:"col", rangeLow:6, rangeHigh:7};
			let loiterLeft = {row: 5, col: 4, axis:"col", rangeLow:3, rangeHigh:4}
			let loiterUp = {row: 4, col: 3, axis:"row", rangeLow:3, rangeHigh:4};
			let loiterDown = {row: 6, col: 5, axis:"row", rangeLow:6, rangeHigh:7};
			let rotateDelay = 2000;
			// makeLoiterer(loiterLeft)(); makeLoiterer(loiterRight)();
			// makeLoiterer(loiterUp)(); makeLoiterer(loiterDown)();
			makeLoiterer(loiterLeft, rotateDelay, rotateDelay * 0, map)();
			makeLoiterer(loiterUp, rotateDelay, rotateDelay * 1, map)();
			makeLoiterer(loiterRight, rotateDelay, rotateDelay * 2, map)();
			makeLoiterer(loiterDown, rotateDelay, rotateDelay * 3, map)();

			
			
		}
	</script>
</body>
</html>