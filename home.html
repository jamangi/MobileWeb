<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>viewer.1.0</title>
	<style>
		* {margin: 0; padding: 0;}
		:root { --purple: #4E4C67; --rose:#985F6F; --pink:#B4869F;
			    --blue:#A6B1E1; --white:#DCD6F7;}
		html, body, main {width: 100%; height: 100%;}
		article#gamebox {height: 90%; width: 100%; background:var(--white); 
						 overflow-x: scroll; overflow-y: scroll; position:relative;}
		footer {height: 10%; width: 100%; background:var(--blue); position:relative;}

		div.character, div.tile, article#map {position: absolute;}
		div.tile img {width: 100%; height: 100%;}

		.character{z-index:1;}
		#map {z-index: 0;}
		footer div {font-size: 80%;}
		
	</style>
</head>
<body>
<main>
	<article id="gamebox">
		<article id="map">
			
		</article>
		<div id="user" class="character">
			<img src="images/titan/titanSleepRight.gif">
		</div>
	</article>
	<footer id="footer">
		<div id="mapSize"> </div>
		<div id="mouseCoordinates"></div>
		<div id="mapCoordinates"></div>
	</footer>
</main>

<script type="text/javascript">
	window.onload = function() {
		let map = document.getElementById("map");
		let mapWidth = 1200, mapCols = 40;
		let mapHeight = 1200, mapRows = 40;
		map.style.width = mapWidth + "px", map.style.height = mapHeight + "px";
		let mapCellSize = mapWidth / mapCols;
		let gb = document.getElementById("gamebox");
		let gbWidth = gb.offsetWidth;
		let gbRatioX = mapWidth / gbWidth; 
		let gbHeight = gb.offsetHeight;
		let gbRatioY = mapHeight / gbHeight;
		let gbCols = Math.floor(mapCols * gbRatioX + 1), gbRows = Math.floor(mapRows * gbRatioY + 1);

		let footer = document.getElementById("footer");

		// draw map under doggy
		for(let i = 0; i < mapRows; i+=2){
			for (let j = 0; j < mapCols; j+=2){
				layTile(i, j, 2);
			}

		}

		function layTile(row, col, size){
			let tile = document.createElement("div");
	    	tile.setAttribute("class", "tile");
			tile.style.width = mapCellSize * size + "px";
	    	tile.style.height = mapCellSize * size + "px";
	    	tile.style.left = mapCellSize * col + "px";
	    	tile.style.top = mapCellSize * row + "px";
	    	let img = document.createElement("img");
	    	img.setAttribute("src", "images/map/floor/brownfloor_2_2.png");
	    	tile.append(img);
	    	map.append(tile);
		}

		function printMousePos(event) {
			let mapSize = document.getElementById("mapSize");
			let mouseCoordinates = document.getElementById("mouseCoordinates");
			let mapCoordinates = document.getElementById("mapCoordinates");
			let mapRow = Math.floor(event.clientY / mapCellSize), mapCol = Math.floor(event.clientX / mapCellSize);
			mapSize.innerHTML = "map size: "+mapWidth+"px, "+mapHeight+"px - dimensions: "+mapRows +"c, "+mapCols+"c - cell size: "+mapCellSize+"px";
			mouseCoordinates.innerHTML = "clientX: " + event.clientX + " - clientY: " + event.clientY;
			mapCoordinates.innerHTML = "mapRow: " + mapRow + " - mapCol: " + mapCol;
		}

		document.addEventListener("click", printMousePos);

	}

</script>
</body>
</html>